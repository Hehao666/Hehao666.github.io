---
layout: post
title: ESP32 SD卡服务器
subtitle: 不错的小玩意
author: haha233jpg
categories: [教程, ESP32, 适合新手]
excerpt_image: "/assets/images/2024-4-28/esp32.png"
tags: [教程, ESP32, 适合新手]
top: 3
---

## 1. 项目介绍
&emsp;&emsp;受B站大佬启发，兴趣使然，期望制作出一款功能丰富的小体积便携服务器，此服务器受硬件限制，读写速度较慢，在500KB以下，故不期望代替U盘类存储设备，同时由于使用库函数限制，TF卡大小限制为32G(FAT32)，不过支持中文（部分支持，如上传下载）。同时ESP32-P4（还未推出）目测性能强悍，功能丰富，后期预计会推出升级版采用P4芯片。

&emsp;&emsp;电路板尺寸为22\*30\*1.6mm，包含外壳的整体尺寸为4\*3(3.1)\*1cm；非常小巧精悍。

## 2. 硬件介绍
&emsp;&emsp;**硬件选择**

|     处理器     | 电源管理芯片 |  电源接口   |       存储        |           其他（可不焊接）            |
| :------------: | :----------: | :---------: | :---------------: | :-----------------------------------: |
| ESP32-WROOM-32 | AMS1117-3.3V | Type-C-6Pin | TF卡座（32GTF卡） | 2.54x5排插、M2螺丝（长1cm）和对应螺帽 |

&emsp;&emsp;**引脚部分**

| ESP32 | TF卡座 | 2.54x5排插 | 其他  |
| :---: | :----: | :--------: | :---: |
|  IO2  |  DAT0  |            |       |
| IO14  |  CLK   |            |       |
| IO15  |  CMD   |            |       |
| IO16  |   CD   |            |       |
|       |        |     1      |  3V3  |
|  IO0  |        |     2      |       |
| TXD0  |        |     3      |       |
| RXD0  |        |     4      |       |
|       |        |     5      |  GND  |

## 3. 软件功能介绍
&emsp;&emsp;**功能包含**：文件总管理，文件快传，开机自连WIFI，网页游戏，在线影院，剪切板，模式转换，设置（含OTA）

&emsp;&emsp;**主推功能**：文件总管理，设置（含OTA），开机自连WIFI

&emsp;&emsp;**文件总管理**：功能包含新建文件夹、文件下载、文件批量上传、访问TF卡内各级目录，删除(批量删除)、重命名以及**在线编辑TXT和HTML文件**，该功能旨在使该设备脱离读卡器完全管理TF卡，免去插拔以及频繁更换设备的烦恼。

&emsp;&emsp;**文件快传**：该功能为文件总管理青春版，精简部分功能，跳转至上传文件夹，方便新手使用。

&emsp;&emsp;**设置**：设置界面可以更改头像、背景和网页样式（需要有一定能力，自己制作后替换）。以及查看当前固件版本号，在线OTA升级系统固件（本地上传固件包，同时需要能联网，意思是需要STA模式，AP不行）。

&emsp;&emsp;**开机自连WIFI**：可以存储多个WIFI信息，开机后依次自动连接，均未连接上开启AP模式。可以设置单个WIFI最长连接时间，连接的WIFI数量（下限1，上限9）。

## 4. 制作流程
1. 通过**嘉立创**下单电路板，购买**BOM表**上所需零件，下单3d打印外壳和nfc贴纸，下载好程序代码（Arduino）。（不包括各种工具，需自备）  
2. 电路板上**焊接**元件，最好先焊接esp32部分，连接串口测试功能，正常后焊接外围部分。    
3. 组装外壳，M2螺丝及其对应螺帽\*3个，nfc贴纸1张（手机上下载**NFC标签助手**），通过**NFC标签助手**写入URL(http://esp32.local/)。  
4. 接通电源，第一次使用需要稍作等待，连接上该设备的热点（HAHASDCARD,默认密码333444555），连接后手机开启NFC碰一碰贴纸即可进入后台。

## 5. 注意事项
&emsp;&emsp;焊接外围部分时需**注意**：R5和R8必须在下载程序后焊接，**因为这两个电阻连接的是下载相关引脚**，其中R5可以不进行焊接。  
&emsp;&emsp;**电源问题**：该设备没有设计指示灯，接通电源后无法知道是否启动，只能自己看着办，同时6脚C口焊接时需要注意不要虚焊，不然只能单面使用。